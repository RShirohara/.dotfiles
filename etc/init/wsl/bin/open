#!/usr/bin/env bash
# encoding: UTF-8
# author: RShirohara
# open on windows

ps=$(which powershell.exe)

function usage() {
    cat <<EOF
$(basename ${0}) is a tool for open link on WSL.

Usage:
    $(basename ${0}) [path]
EOF
}

case ${1} in
    -h|--help )
        usage
        ;;
    * )
        if [ $? -ne 0 ] || [ "${1:0:4}" = "http" ]; then
            wpath="$1"
        else
            wpath=$(wslpath -w $(readlink -f "$1") 2>/dev/null)
        fi
        $ps /c start "'$wpath'"
        ;;
esac
