47c47
<           git submodule update --init --recursive
---
>           git submodule update --recursive
79d78
<   local pfunction_glob='^([_.]*|prompt_*_setup|README*|*~)(-.N:t)'
80a80,88
>   # For some reason, Termux fails to locate the "prompt" module when NO_CASE_GLOB
>   # is set, but simply setting CASE_GLOB messes up the prompt itself.
>   # This temporarily enables it for the two globs, then immediately resets it.
>   # Adapted from https://unix.stackexchange.com/a/42031
>   local case_glob_prefix=NO
>   [[ -o CASE_GLOB ]] && case_glob_prefix= 
>   setopt CASE_GLOB
>   local pfunction_glob='^([_.]*|prompt_*_setup|README*|*~)(-.N:t)'
>   setopt ${case_glob_prefix}_CASE_GLOB
98a107
>       setopt CASE_GLOB
99a109
>       setopt ${case_glob_prefix}_CASE_GLOB
101,104c111,112
<         if ! zstyle -t ':prezto:load' pmodule-allow-overrides 'yes'; then
<           print "$0: conflicting module locations: $locations"
<           continue
<         fi
---
>         print "$0: conflicting module locations: $locations"
>         continue
111c119
<       pmodule_location=${locations[-1]}
---
>       pmodule_location=${locations[1]}
114c122
<       fpath=(${pmodule_location}/functions(-/FN) $fpath)
---
>       fpath=(${pmodule_location}/functions(/FN) $fpath)
